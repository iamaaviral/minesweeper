{"version":3,"sources":["utils/FloodFill.tsx","assets/bomb.svg","assets/red-flag.svg","components/board/showMines.tsx","utils/ShuffleBoard.tsx","utils/NeighbourCount.tsx","components/board/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["floodfill","x","y","openStatus","width","height","neighbourMineCount","index","i","j","ShowMines","prop","data","minesCount","React","useState","markStatus","setMarkStatus","setOpenStatus","setNeighbourMineCount","mines","setMines","gameOver","setGameOver","selectedMineCount","setselectedMineCount","setContextMenuVisible","longPressTimer","useRef","handleClickLeft","newOpenStatus","slice","useEffect","total","Array","fill","start","length","randomIndex","Math","floor","random","tmp","shuffle","result","newX","k","newY","calcNeighbourCount","every","isMine","minesArray","row","icon","className","id","style","color","src","red_flag","alt","bomb","push","onClick","onTouchStart","current","setTimeout","onContextMenu","e","newmarkStatus","newselectedMineCount","handleClickRight","preventDefault","map","value","Board","props","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.da80d6de.chunk.js","sourcesContent":["export function floodfill(\n    x:number,\n    y:number,\n    openStatus:Array<number>,\n    width:number,\n    height:number,\n    neighbourMineCount:Array<number>\n):void{\n    if (x < 0 || y < 0 || x === height || y === width) {\n        return;\n    }\n    const index = x * width + y;\n    if (openStatus[index] === 1) {\n        return;\n    }\n    openStatus[index] = 1;\n    if (neighbourMineCount[index] > 0) {\n        return;\n    }\n    for (let i = -1; i < 2; i++) {\n        for (let j = -1; j < 2; j++) {\n            floodfill(x + i, y + j,openStatus,width,height,neighbourMineCount);\n        }\n    }\n}","export default __webpack_public_path__ + \"static/media/bomb.cffe0f47.svg\";","export default __webpack_public_path__ + \"static/media/red-flag.083d31fd.svg\";","import React, { useRef } from 'react'\nimport { shuffle } from '../../utils/ShuffleBoard'\nimport { calcNeighbourCount } from '../../utils/NeighbourCount'\nimport { floodfill } from '../../utils/FloodFill'\nimport bomb from '../../assets/bomb.svg'\nimport red_flag from '../../assets/red-flag.svg'\n\ntype Props = {\n    data: {\n        height: number,\n        width: number,\n        minesCount: number\n    }\n}\n\nconst ShowMines = (prop: Props) => {\n    const { height, width, minesCount } = prop.data;\n\n    const [markStatus, setMarkStatus] = React.useState<Array<number>>([])\n    const [openStatus, setOpenStatus] = React.useState<Array<number>>([])\n    const [neighbourMineCount, setNeighbourMineCount] = React.useState<Array<number>>([])\n    const [mines, setMines] = React.useState<Array<number>>([])\n    const [gameOver, setGameOver] = React.useState<boolean>(false)\n    const [selectedMineCount, setselectedMineCount] = React.useState<number>(0)\n    const [_, setContextMenuVisible] = React.useState<boolean>(false);\n    const longPressTimer = useRef<any>();\n\n    const handleClickLeft = (x: number, y: number): void => {\n        if (gameOver) {\n            return;\n        }\n        const index = x * width + y;\n        if (openStatus[index] === 1 || markStatus[index] === 1) {\n            return;\n        }\n        if (mines[index]) {\n            const newOpenStatus = openStatus.slice(0);\n            newOpenStatus[index] = 1;\n            setOpenStatus(newOpenStatus)\n            setGameOver(true)\n            return;\n        }\n\n        if (neighbourMineCount[index] > 0) {\n            const newOpenStatus = openStatus.slice(0);\n            newOpenStatus[index] = 1;\n            setOpenStatus(newOpenStatus)\n            return;\n        }\n\n        const newOpenStatus = openStatus.slice(0);\n        floodfill(x, y, newOpenStatus, width, height, neighbourMineCount);\n        setOpenStatus(newOpenStatus)\n    }\n\n    const handleClickRight = (x: number, y: number) => {\n        if (gameOver) {\n            return;\n        }\n        const index = x * width + y;\n        if (openStatus[index] === 1) {\n            return;\n        }\n        const newmarkStatus = markStatus.slice(0);\n        newmarkStatus[index] = (newmarkStatus[index] + 1) % 2;\n        let newselectedMineCount = selectedMineCount;\n        if (newmarkStatus[index]) {\n            newselectedMineCount++;\n        } else {\n            newselectedMineCount--;\n        }\n        setMarkStatus(newmarkStatus);\n        setselectedMineCount(newselectedMineCount)\n    }\n\n    React.useEffect(() => {\n        const total = width * height;\n        const mines = new Array(total).fill(0);\n        for (let i = 0; i < minesCount; i++) {\n            mines[i] = 1;\n        }\n        shuffle<number>(mines, minesCount);\n        const neighbourMineCount = calcNeighbourCount(width, height, mines);\n        setOpenStatus(new Array(total).fill(0))\n        setMarkStatus(new Array(total).fill(0))\n        setNeighbourMineCount(neighbourMineCount)\n        setMines(mines)\n        setGameOver(false)\n        setselectedMineCount(0)\n    }, [height, width, minesCount])\n\n    React.useEffect(() => {\n        if (selectedMineCount === minesCount) {\n            const match = mines.every((isMine, index) => {\n                if ((isMine && markStatus[index] === 1) || (!isMine && markStatus[index] !== 1)) {\n                    return true;\n                }\n                return false;\n            });\n            if (match) {\n                setGameOver(true)\n            }\n        }\n    }, [selectedMineCount])\n\n    const minesArray = [];\n    for (let i = 0; i < height; i++) {\n        const row = [];\n        for (let j = 0; j < width; j++) {\n            const index = i * width + j;\n            let icon = null;\n            if (markStatus[index] === 1) {\n\n                icon = (\n                    <span className=\"each-cell\" id=\"mark-1\" style={{ color: 'red' }}><img src={red_flag} alt=\"red flag\"/></span>\n                );\n            }\n            else if (openStatus[index] === 1) {\n\n                if (mines[index]) {\n                    icon = (\n                        <span className=\"each-cell\" id=\"mine-1\"><img src={bomb} alt='bomb'/></span>\n                    );\n                } else if (neighbourMineCount[index] > 0) {\n                    icon = (\n                        <span id=\"no-mine-1\">\n                            {neighbourMineCount[index]}\n                        </span>\n                    );\n                }\n            }\n\n            const handleTouchStart = () => {\n                longPressTimer.current = setTimeout(() => {\n                  setContextMenuVisible(true);\n                }, 500);\n              };\n\n            row.push(\n                <div\n                    className={`mine-sweeper-item ${openStatus[index] ? 'is-open' : ''}`}\n                    key={j}\n                    onClick={() => handleClickLeft(i, j)}\n                    onTouchStart={handleTouchStart}\n                    onContextMenu={(e) => handleClickRight(i, j)}\n                >\n                    {icon}\n                </div>\n            );\n        }\n        minesArray.push(\n            <div className=\"mine-sweeper-row\" key={i}>\n                {row}\n            </div>\n        );\n    }\n\n\n    return (\n        <div\n            className=\"mine-sweeper-container\"\n            onContextMenu={(e: React.MouseEvent) => e.preventDefault()}\n        >\n            {minesArray.map((e) => { return e })}\n            <div className=\"panel-container\">\n                <div className=\"panel-data-container\">\n                    <div>\n                        selected: {selectedMineCount}\n                    </div>\n                    <div>\n                        Total mines: {minesCount}\n                    </div>\n                </div>\n                <div className=\"result-container\">\n                    {gameOver ? <div>Game over</div> : <div>Game in progress</div>}\n                    {gameOver ? markStatus.length === mines.length && markStatus.every((value, index) => value === mines[index]) ? <div>You won</div> : <div>You lost</div> : null}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default ShowMines","\nexport function shuffle<T>(mines:Array<T>,start:number):void {\n    for (let i = 1; i < mines.length; i++) {\n        const randomIndex = Math.floor(Math.random() * (i + 1));\n        const tmp = mines[randomIndex];\n        mines[randomIndex] = mines[i];\n        mines[i] = tmp;\n    }\n}","export function calcNeighbourCount(width:number,height:number,mines:Array<number>):Array<number>{\n    const result = new Array(mines.length).fill(0);\n    for (let i = 0; i < result.length; i++) {\n        if (!mines[i]) {\n            continue;\n        }\n        const y = i % width;\n        const x = (i - y) / width;\n        for (let j = -1; j < 2; j++) {\n            const newX = x + j;\n            if (newX < 0 || newX === height) {\n                continue;\n            }\n            for (let k = -1; k < 2; k++) {\n                const newY = y + k;\n                if (newY < 0 || newY ===width) {\n                    continue;\n                }\n                result[newX * width + newY]++;\n            }\n        }\n    }\n    return result;\n}\n","import './index.css';\nimport ShowMines from './showMines'\n\ntype Props = {\n    height: number,\n    width: number,\n    minesCount: number\n}\n\nconst Board = (props: Props) => {\n    return (\n        <div className=\"board-container\">\n            <ShowMines data={props} />\n        </div>\n    )\n}\n\nexport default Board;","import './App.css';\nimport  Board from './components/board/index' \n\nfunction App() {\n\n  return (\n    <div className=\"App\">\n      <div className=\"app-main\">\n        <Board height={8} width={8} minesCount={10}/>\n      </div>\n\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}